{% load widget_tweaks %}

<div class="modal-header">
    <h5 class="modal-title mr-3">Asset Details</h5>
    <button type="button" class="btn btn-primary ml-auto"
            style="margin-left:240px; color: #3850a6; border-color: #3850a6; background-color: rgba(56, 80, 166, 0.05); border-width: 2px"
            id="purchaseBtn" onclick="enableForm()">Edit
    </button>
    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>
<div class="modal-body">
    <form id="myForm" class="row g-3" method="POST" novalidate>
        {% csrf_token %}

        <div class="col-md-12">
            <label for="inputName4" class="form-label">Description</label>
            {% render_field form.asset_description class="form-control" placeholder=""% disabled="disabled" %}
            <div class="{% if form.asset_description.errors %} invalid{% endif %}">
                {% for error in form.asset_description.errors %}
                    <p class="help-block text-danger" style="font-size: 12px;">{{ error }}</p>
                {% endfor %}
            </div>
        </div>

        <div class="col-md-6">
            <label for="inputName4" class="form-label">Condition</label>
            {% render_field form.asset_condition class="form-control" placeholder=""% disabled="disabled" %}
            <div class="{% if form.asset_condition.errors %} invalid{% endif %}">
                {% for error in form.asset_condition.errors %}
                    <p class="help-block text-danger" style="font-size: 12px;">{{ error }}</p>
                {% endfor %}
            </div>
        </div>

        <div class="col-md-6">
            <label for="inputName4" class="form-label">On Hand</label>
            {% render_field form.asset_on_hand class="form-control" placeholder=""% disabled="disabled" %}
            <div class="{% if form.asset_on_hand.errors %} invalid{% endif %}">
                {% for error in form.asset_on_hand.errors %}
                    <p class="help-block text-danger" style="font-size: 12px;">{{ error }}</p>
                {% endfor %}
            </div>
        </div>

        <div class="col-md-6">
            <label for="inputName4" class="form-label">Manufacturer</label>
            {% render_field form.asset_manufacturer class="form-control" placeholder=""% disabled="disabled" %}
            <div class="{% if form.asset_manufacturer.errors %} invalid{% endif %}">
                {% for error in form.asset_manufacturer.errors %}
                    <p class="help-block text-danger" style="font-size: 12px;">{{ error }}</p>
                {% endfor %}
            </div>
        </div>

        <div class="col-md-6">
            <label for="inputName4" class="form-label">Model</label>
            {% render_field form.asset_model class="form-control" placeholder=""% disabled="disabled" %}
            <div class="{% if form.asset_model.errors %} invalid{% endif %}">
                {% for error in form.asset_model.errors %}
                    <p class="help-block text-danger" style="font-size: 12px;">{{ error }}</p>
                {% endfor %}
            </div>
        </div>

        <div class="col-md-6">
            <label for="inputName4" class="form-label">Type</label>
            {% render_field form.asset_type class="form-control" placeholder=""% disabled="disabled" %}
            <div class="{% if form.asset_type.errors %} invalid{% endif %}">
                {% for error in form.asset_type.errors %}
                    <p class="help-block text-danger" style="font-size: 12px;">{{ error }}</p>
                {% endfor %}
            </div>
        </div>
        <div class="col-md-6">
            <label for="inputName4" class="form-label">Supplier</label>
            {% render_field form.asset_supplier class="form-control" placeholder="" disabled="disabled" %}
            <div class="{% if form.asset_supplier.errors %}invalid{% endif %}">
                {% for error in form.asset_supplier.errors %}
                    <p class="help-block text-danger " style="font-size:13px;">{{ error }}</p>
                {% endfor %}
            </div>
        </div>

        <div class="col-md-12">
            <label for="inputName4" class="form-label">Notes</label>
            {% render_field form.notes class="form-control" placeholder="" disabled="disabled" %}
            <div class="{% if form.notes.errors %}invalid{% endif %}">
                {% for error in form.notes.errors %}
                    <p class="help-block text-danger" style="font-size: 12px;">{{ error }}</p>
                {% endfor %}
            </div>
        </div>

        <div>
            <hr>
        </div>
        <div class="row  justify-content-center">
            <div class="col-md-4 text-center">
                <label class="form-label">Date Added</label>
                <label class="form-label"
                       style="display: block; margin-bottom: 8px;">{{ assets.asset_date_added }}</label>
            </div>
            <div class="col-md-4 text-center">
                <label class="form-label">Purchase Date</label>
                <label class="form-label" style="display: block; margin-bottom: 8px;">{{ assets.purchase_date }}</label>
            </div>
            <div class="col-md-4 text-center">
                <label class="form-label">Date Modified</label>
                <label class="form-label"
                       style="display: block; margin-bottom: 8px;">{{ assets.asset_date_modified }}</label>
            </div>
        </div>

        <div class="modal-footer justify-content-end">
            <button type="button" class="btn btn-secondary me-auto" data-bs-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-primary invisible" id="saveBtn">Save Changes</button>
        </div>
    </form>
</div>

<script>
    function enableForm() {
        // Get all elements with the class "form-control" inside the form with the id "myForm"
        var formControls = document.querySelectorAll('#myForm .form-control');

        // Loop through each element and remove the "disabled" attribute
        formControls.forEach(function (element) {
            element.removeAttribute('disabled');
        });

        // Make the "Save Changes" button visible
        var saveChangesButton = document.querySelector('#saveBtn');

        saveChangesButton.classList.remove('invisible');
    }

</script>